<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>æ²ç¤ºæ¿</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1>ToDoãƒªã‚¹ãƒˆğŸ¶</h1>
    <div>
      <!-- <input id="name" placeholder="åå‰" /> -->
      <!-- <input id="title" placeholder="ã‚¿ã‚¤ãƒˆãƒ«" /> -->
      <input id="text" placeholder="ã‚„ã‚‹ã“ã¨ã‚’è¿½åŠ ã—ã‚ˆã†!" />
      <button id="send"><a href=''>è¿½åŠ </a></button>
    </div>

    <table>
      <tr id="list"></tr>
    </table>

 <!-- ã“ã“ã‹ã‚‰JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
    <script>
      // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®å‚ç…§ã‚’æº–å‚™
    var firebaseRef = new Firebase("https://first-hp-3c02e-default-rtdb.firebaseio.com"); 
      var messagesRef = firebaseRef.child('boad1'); 
 
            // æ—¢å­˜ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
      messagesRef.on('child_added', function(snapshot, prevChildKey) { // æŠ•ç¨¿ãŒå¢—ãˆãŸã‚‰å–å¾—
        var msg = snapshot.val();
        $('<tr>').html("<td>ã‚„ã‚‹ã“ã¨:"+ msg.text +"</td><td>(" +msg.date +   ")</td>"+"<td><button><a href='update.html?id="+snapshot.key()+"'>ç·¨é›†</a></button></td>" +"<td><button id='green'><a href='delete.html?id="+snapshot.key()+"'>å®Œäº†</a></button></td>"  ).prependTo('#list');
      });
 
 
      $('#send').click(function() {//sendãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚‰ç™ºç«
        // æ–°è¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æŠ•ç¨¿
        let date = new Date();
        if($('#text').val().length>0){
            messagesRef.push({ // pushã¯è¿½åŠ 
            text: $('#text').val(),
            date: (date.getMonth() + 1) +"/"+date.getDate()+" " + date.getHours()+":"+date.getMinutes()
            });
        }
        $('#send').val("");
      });
    </script>
  <script src="/__/firebase/8.4.2/firebase-app.js"></script>
  <script src="/__/firebase/8.4.2/firebase-analytics.js"></script>
  <script src="/__/firebase/init.js"></script>
  </body>
</html>